(this.webpackJsonptramuntana=this.webpackJsonptramuntana||[]).push([[0],{64:function(e,t,r){},65:function(e,t,r){},67:function(e,t,r){},92:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r(19),i=r.n(n),s=(r(64),r(65),r(11)),c=r(17),u=r(2),o=a.createContext(void 0),l=a.createContext(void 0),m=function(e,t){switch(t.type){case"setAppId":return Object(c.a)(Object(c.a)({},e),{},{appId:t.payload});case"setCityName":return Object(c.a)(Object(c.a)({},e),{},{cityName:t.payload});default:throw new Error("Unhandled action: ".concat(t))}},d=function(e){var t=e.children,r=a.useReducer(m,{appId:Object({NODE_ENV:"production",PUBLIC_URL:"/tramuntana",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_OPENWEATHER_KEY||"",cityName:""}),n=Object(s.a)(r,2),i=n[0],c=n[1];return Object(u.jsx)(o.Provider,{value:i,children:Object(u.jsx)(l.Provider,{value:c,children:t})})},h=function(){var e=a.useContext(o);if(void 0===e)throw new Error("useState must be used within a AppContextProvider");return e},p=r(103),j=r(104),w=r(101),b=(r(67),function(){var e=h(),t=e.appId,r=e.cityName,n=function(){var e=a.useContext(l);if(void 0===e)throw new Error("useDispatch must be used within a AppContextProvider");return e}();return Object(u.jsxs)(p.a,{tag:"header",direction:"row",align:"center",justify:"around",background:"brand",pad:{left:"medium",right:"small",vertical:"small"},elevation:"medium",style:{zIndex:1},children:[Object(u.jsx)(j.a,{level:"3",margin:"none",children:"Tramuntana"}),Object(u.jsx)(w.a,{placeholder:"AppId",value:t,onChange:function(e){return n({type:"setAppId",payload:e.currentTarget.value})}}),Object(u.jsx)(w.a,{placeholder:"City",value:r,onChange:function(e){return n({type:"setCityName",payload:e.currentTarget.value})}})]})}),f=r(12),O=r.n(f),x=r(21),v=r(57),P=r.n(v).a.create({baseURL:"http://api.openweathermap.org/data/2.5/",timeout:1e4,headers:{Accept:"application/json","Content-Type":"application/json"}}),y=function(e,t){return P.get(e,t).then((function(e){return e.data})).catch((function(e){return console.log(e),Promise.reject(e)}))},g=function(e,t){return Object.keys(t).reduce((function(r,a){var n=function(e,t){for(var r=t.split("."),a=e,n=0;n<r.length-1;n++){var i=r[n];if(!a||!a.hasOwnProperty(i))return;a=a[i]}return a[r[r.length-1]]}(e,a);return n&&function(e,t,r){for(var a=e,n=t.split("."),i=0;i<n.length-1;i++){var s=n[i];a.hasOwnProperty(s)||(a[s]={}),a=a[s]}a[n[n.length-1]]=r}(r,t[a],n),r}),{})},T={"coord.lon":"coordinates.longitude","coord.lat":"coordinates.latitude",weather:"weatherConditions","main.temp":"weatherParameters.temperature","main.pressure":"weatherParameters.pressure","main.humidity":"weatherParameters.humidity","main.temp_min":"weatherParameters.minTemperature","main.temp_max":"weatherParameters.maxTemperature","main.sea_level":"weatherParameters.pressureAtSeaLevel","main.grnd_level":"weatherParameters.pressureAtGroundLevel",visibility:"visibility","wind.speed":"weatherParameters.windSpeed","wind.deg":"weatherParameters.windDirection","clouds.all":"weatherParameters.cloudiness","rain.1h":"weatherParameters.rainInLastHour","rain.3h":"weatherParameters.rainInLastThreeHours","snow.1h":"weatherParameters.snowInLastHour","snow.3h":"weatherParameters.snowInLastThreeHours",name:"name",dt:"time",timezone:"timezone","sys.sunrise":"sunrise","sys.sunset":"sunset","sys.country":"country"},W=function(){var e=Object(x.a)(O.a.mark((function e(t){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("weather",{params:t});case 2:return r=e.sent,e.abrupt("return",g(r,T));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(e){return Object(u.jsxs)(p.a,{direction:"row",align:"center",justify:"evenly",fill:"horizontal",children:[Object(u.jsx)(j.a,{level:"6",children:e.label}),Object(u.jsx)(j.a,{level:"5",children:e.parameterValue+" "+e.unit})]})},S=function(e){return Object(u.jsxs)("div",{children:[!e.currentWeather.weatherParameters&&Object(u.jsx)("div",{children:"No data"}),e.currentWeather.weatherParameters&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h3",{children:"Current weather"}),Object(u.jsxs)(p.a,{align:"center",justify:"around",pad:{left:"medium",right:"small",vertical:"small"},elevation:"large",children:[Object(u.jsx)(C,{parameterValue:e.currentWeather.weatherParameters.temperature,unit:"K",label:"Temperature:"}),Object(u.jsx)(C,{parameterValue:e.currentWeather.weatherParameters.pressure,unit:"hPa",label:"Pressure:"}),Object(u.jsx)(C,{parameterValue:e.currentWeather.weatherParameters.humidity,unit:"%",label:"Humidity:"}),Object(u.jsx)(C,{parameterValue:e.currentWeather.weatherParameters.maxTemperature,unit:"K",label:"Max temperature:"}),Object(u.jsx)(C,{parameterValue:e.currentWeather.weatherParameters.minTemperature,unit:"K",label:"Min. temperature:"}),Object(u.jsx)(C,{parameterValue:e.currentWeather.weatherParameters.cloudiness,unit:"%",label:"Cloudiness:"}),Object(u.jsx)(C,{parameterValue:e.currentWeather.weatherParameters.windSpeed,unit:"km/h",label:"Wind speed:"}),Object(u.jsx)(C,{parameterValue:e.currentWeather.weatherParameters.windDirection,unit:"km/h",label:"Wind direction:"}),Object(u.jsx)("pre",{children:JSON.stringify(e.currentWeather,null,2)})]})]})]})},_=function(){var e=Object(a.useState)({}),t=Object(s.a)(e,2),r=t[0],n=t[1],i=h(),c=i.appId,o=i.cityName;return Object(a.useEffect)((function(){o.length>3&&W({q:o,appId:c}).then(n)}),[c,o]),Object(u.jsx)(S,{currentWeather:r})},I={"city.coord.lon":"coordinates.longitude","city.coord.lat":"coordinates.latitude","city.country":"country","city.name":"name"},E={weather:"weatherConditions","main.temp":"weatherParameters.temperature","main.pressure":"weatherParameters.pressure","main.humidity":"weatherParameters.humidity","main.temp_min":"weatherParameters.minTemperature","main.temp_max":"weatherParameters.maxTemperature","main.sea_level":"weatherParameters.pressureAtSeaLevel","main.grnd_level":"weatherParameters.pressureAtGroundLevel","wind.speed":"weatherParameters.windSpeed","wind.deg":"weatherParameters.windDirection","clouds.all":"weatherParameters.cloudiness","rain.3h":"weatherParameters.rainInLastThreeHours","snow.3h":"weatherParameters.snowInLastThreeHours",dt:"time",dt_txt:"calculationTime"},V=function(e){var t=g(e,I);return t.forecasts=e.list.map(N),t},N=function(e){return g(e,E)},A=function(){var e=Object(x.a)(O.a.mark((function e(t){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("forecast",{params:t});case 2:return r=e.sent,e.abrupt("return",V(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(e){return Object(u.jsxs)("div",{children:[!e.forecast.weatherParameters&&Object(u.jsx)("div",{children:"No data"}),e.forecast.weatherParameters&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h3",{children:"Forecast"}),Object(u.jsxs)(p.a,{align:"center",justify:"around",pad:{left:"medium",right:"small",vertical:"small"},elevation:"large",children:[Object(u.jsx)(C,{parameterValue:e.forecast.weatherParameters.temperature,unit:"K",label:"Temperature:"}),Object(u.jsx)(C,{parameterValue:e.forecast.weatherParameters.pressure,unit:"hPa",label:"Pressure:"}),Object(u.jsx)(C,{parameterValue:e.forecast.weatherParameters.humidity,unit:"%",label:"Humidity:"}),Object(u.jsx)(C,{parameterValue:e.forecast.weatherParameters.maxTemperature,unit:"K",label:"Max temperature:"}),Object(u.jsx)(C,{parameterValue:e.forecast.weatherParameters.minTemperature,unit:"K",label:"Min. temperature:"}),Object(u.jsx)(C,{parameterValue:e.forecast.weatherParameters.cloudiness,unit:"%",label:"Cloudiness:"}),Object(u.jsx)(C,{parameterValue:e.forecast.weatherParameters.windSpeed,unit:"km/h",label:"Wind speed:"}),Object(u.jsx)(C,{parameterValue:e.forecast.weatherParameters.windDirection,unit:"km/h",label:"Wind direction:"}),Object(u.jsx)("pre",{children:JSON.stringify(e.forecast,null,2)})]})]})]})},H=function(){var e=Object(a.useState)({}),t=Object(s.a)(e,2),r=t[0],n=t[1],i=h(),c=i.appId,o=i.cityName;return Object(a.useEffect)((function(){o.length>3&&A({q:o,appId:c}).then(n)}),[c,o]),Object(u.jsxs)(p.a,{direction:"row",align:"center",justify:"around",wrap:!0,children:[r&&r.forecasts&&r.forecasts.map((function(e,t){return Object(u.jsx)(k,{forecast:e},t)})),!r.forecasts&&Object(u.jsx)("span",{children:"No forecasts"})]})},L=function(){return Object(u.jsxs)("div",{className:"Home",children:[Object(u.jsx)(b,{}),Object(u.jsx)(p.a,{direction:"row",align:"start",justify:"around",children:Object(u.jsx)(_,{})}),Object(u.jsx)(p.a,{direction:"row",align:"start",justify:"around",children:Object(u.jsx)(H,{})})]})},K=r(102),D={global:{font:{family:"Roboto",size:"18px",height:"20px"}}},R=function(){return Object(u.jsx)(d,{children:Object(u.jsx)(K.a,{theme:D,full:!0,children:Object(u.jsx)(p.a,{fill:!0,children:Object(u.jsx)(L,{})})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(u.jsx)(R,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){return console.log("ServiceWorker Warning: ",e)}))}},[[92,1,2]]]);
//# sourceMappingURL=main.d6ccabad.chunk.js.map